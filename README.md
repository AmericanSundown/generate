# generate [![NPM version](https://img.shields.io/npm/v/generate.svg)](https://www.npmjs.com/package/generate) [![Build Status](https://img.shields.io/travis/generate/generate.svg)](https://travis-ci.org/generate/generate)

> Fast, composable, highly extendable project generator with a user-friendly and expressive API.

- [Getting started](#getting-started)
  * [Install](#install)
- [Usage](#usage)
- [CLI](#cli)
  * [help](#help)
  * [init](#init)
  * [Run generators](#run-generators)
  * [Run tasks](#run-tasks)
  * [Run sub-generators](#run-sub-generators)
  * [Run a generator's tasks](#run-a-generator-s-tasks)
  * [Run a sub-generator's tasks](#run-a-sub-generator-s-tasks)
- [API](#api)
  * [Generate](index.js#L25)
  * [.ignore](index.js#L154)
  * [.fillin](index.js#L176)
  * [.getFile](index.js#L195)
  * [.getTemplate](index.js#L210)
  * [.getGenerator](index.js#L339)
  * [.registerPath](index.js#L362)
  * [.extendGenerator](index.js#L396)
  * [.compose](index.js#L419)
  * [.process](index.js#L452)
  * [.each](index.js#L477)
  * [.eachSeries](index.js#L506)
  * [.eachStream](index.js#L529)
  * [.scaffold](index.js#L566)
  * [.scaffoldStream](index.js#L608)
  * [.union](index.js#L643)
- [Task API](#task-api)
  * [[.task](https:/github.com/jonschlinkert/composer/blob/master/index.js#L68)
  * [[.build](https:/github.com/jonschlinkert/composer/blob/master/index.js#L125)
  * [[.series](https:/github.com/jonschlinkert/composer/blob/master/index.js#L181)
  * [[.parallel](https:/github.com/jonschlinkert/composer/blob/master/index.js#L213)
  * [[.watch](https:/github.com/jonschlinkert/composer/blob/master/index.js#L230)
- [File System API](#file-system-api)
  * [[.copy](https:/github.com/jonschlinkert/assemble-fs/blob/master/index.js#L56)
  * [[.src](https:/github.com/jonschlinkert/assemble-fs/blob/master/index.js#L73)
  * [[.symlink](https:/github.com/jonschlinkert/assemble-fs/blob/master/index.js#L91)
  * [[.dest](https:/github.com/jonschlinkert/assemble-fs/blob/master/index.js#L107)
- [Authoring generators](#authoring-generators)
  * [Generator naming conventions](#generator-naming-conventions)
- [TODO](#todo)
- [Why Generate?](#why-generate-)
- [Related projects](#related-projects)
- [Running tests](#running-tests)
- [Contributing](#contributing)
- [Author](#author)
- [License](#license)

_(TOC generated by [verb](https://github.com/verbose/verb) using [markdown-toc](https://github.com/jonschlinkert/markdown-toc))_

Generate is a fast, well-tested (more than 1,000 unit tests), and highly pluggable project generator for node.js.

**Feature highlights**

* Generators can have gulp-style "tasks" (gulp plugins can be used too)
* Supports sub-generators, with any level of nesting!
* Generators can extend and use other generators
* Generators, sub-generators and their tasks can be run by command line or API
* Generate can be used as a node.js library, to add generate's functionality to other applications (for example, generate is used in [assemble](http://assemble.io))

## Getting started

### Install

To get started, you'll first need to install `generate` globally using [npm](https://docs.npmjs.com/), along with any generators you'd like to run.

**Install Generate**

Install globally with [npm](https://www.npmjs.com/)

```sh
$ npm i -g generate
```

***

## Usage

```sh
$ gen <command> [args]
```

## CLI

_(WIP)_

### help

_(TODO)_

Get started with Generate.

```js
$ gen help
```

### init

_(TODO)_

Get started with Generate.

```js
$ gen init
```

Upon running `init`, generate will prompt you for answers to the following questions:

### Run generators

```sh
$ gen <generator name> [options]
```

**Example**

Run generator `abc`

```sh
$ gen abc
```

### Run tasks

To run a task on the `base` generator, just pass the name of the task to run.

```sh
$ gen <task name> [options]
```

Unless overridden by the user, the `base` generator is the default generator that ships with Generate. This generator doesn't really "generate" anything, but it will prompt you for a few answers (if you choose), to store data that's commonly needed by templates, like `author.name`, GitHub `username`, etc.

**Example**

Run task `bar`:

```sh
$ gen bar
```

### Run sub-generators

> Sub-generators are normal generators that are called from (or registered by) other generators.

Dot-notation is used for getting and runing sub-generators.

```sh
$ gen <generator name>.<sub-generator name> [options]
```

**Examples**

Run sub-generator `b` on generator `a`:

```sh
$ gen a.b [options]
```

Run sub-generator `c`:

```sh
$ gen a.b.c [options]
```

And so on...

### Run a generator's tasks

```sh
$ gen <generator name>:<task name> [options]
```

**Example**

Run task `bar` on generator `foo`.

```sh
$ gen foo:bar 
```

### Run a sub-generator's tasks

```sh
$ gen <generator name>.<sub-generator name>:<task name> [options]
```

**Example**

Run task `foo` on sub.generator `a.b.c`.

```sh
$ gen a.b.c:foo 
```

## API

### [Generate](index.js#L25)

Create an instance of `Generate` with the given `options`

**Params**

* `options` **{Object}**: Configuration options to initialize with.

**Example**

```js
var Generate = require('generate');
var generate = new Generate(options);
```

### [.ignore](index.js#L154)

Add ignore patterns to the `generate.cache.ignores` array. This array is initially populated with patterns from `gitignore`

**Params**

* `patterns` **{String|Array}**
* `returns` **{Object}**: returns the instance for chaining

**Example**

```js
generate.ignore(['foo', 'bar']);
```

### [.fillin](index.js#L176)

Set `prop` with the given `value`, but only if `prop` is not already defined.

**Params**

* `prop` **{String}**: The name of the property to define
* `val` **{any}**: The value to use if a value is _not already defined_

* `returns` **{Object}**: Returns the instance for chaining

**Example**

```js
app.set('cwd', 'foo');
app.fillin('cwd', process.cwd());
console.log(app.get('cwd'));
//=> 'foo'
```

### [.getFile](index.js#L195)

Get a file from the `generate.files` collection.

**Params**

* `pattern` **{String}**: Pattern to use for matching. Checks against
* `returns` **{Object}**: If successful, a `file` object is returned, otherwise `null`

**Example**

```js
generate.getFile('LICENSE');
```

### [.getTemplate](index.js#L210)

Get a template from the `generate.templates` collection.

**Params**

* `pattern` **{String}**: Pattern to use for matching. Checks against
* `returns` **{Object}**: If successful, a `file` object is returned, otherwise `null`

**Example**

```js
generate.getTemplate('foo.tmpl');
```

### [.getGenerator](index.js#L339)

Get generator `name`.

**Params**

* `name` **{String}**
* `returns` **{Object}**: Returns a generator object, which is an instance of generate.

**Example**

```js
generate.getGenerator('node')
  .build('default', function(err) {
    if (err) throw err;
    console.log('done!');
  });
```

### [.registerPath](index.js#L362)

Register generator `name` by the given filepath. This method wraps the `register` method to simplify adding generators by path.

See the [register](#register) method for more details.

**Params**

* `name` **{String}**: The generator name
* `filepath` **{Object}**: The filepath of the generator.
* `env` **{Object}**
* `returns` **{Object}**

### [.extendGenerator](index.js#L396)

Extend generator `app` with any tasks, sub-generators or other settings on the `base` instance.

**Params**

* `app` **{Object}**: Specified instance of generate.
* `base` **{Object}**: The base instance of generate
* `returns` **{Object}**

**Example**

```js
generate.register('my-extended-generator', function(app, base) {
  base.extendGenerator(app);
});
```

### [.compose](index.js#L419)

Extend generator `app` with the tasks, sub-generators, and other settings of one or more additional generators.

**Params**

* `app` **{Object}**: Instance of generate.
* `names` **{String|Array}**: Names of generators to compose with `app`.
* `returns` **{Object}**

**Example**

```js
var foo = generate.getGenerator('foo');
generate.compose(foo, ['bar', 'baz', 'qux']);
```

### [.process](index.js#L452)

Similar to [copy](#copy) but calls a plugin `pipeline` if passed on the `options`. This allows plugin pipelines to be programmatically built-up and dynamically changed on-the-fly.

**Params**

* `files` **{Object}**
* `options` **{Object}**
* `cb` **{Function}**
* `returns` **{Stream}**: Returns a [vinyl](http://github.com/gulpjs/vinyl) stream

**Example**

```js
generate.process({src: ['a.txt', 'b.txt']}, options);
```

### [.each](index.js#L477)

Generate `files` configurations in parallel.

**Params**

* `config` **{Object}**
* `cb` **{Function}**: Optional callback function. Calls `.eachStream` and returns a stream when callback is not passed.

**Example**

```js
generate.each(files, function(err) {
  if (err) throw err;
  console.log('done!');
});
```

### [.eachSeries](index.js#L506)

Generate `files` configurations in series.

**Params**

* `config` **{Object}**
* `cb` **{Function}**

**Example**

```js
var expand = require('expand-files');
var config = expand.config({src: '*', dest: 'foo/'});
generate.eachSeries(config, function(err) {
  if (err) throw err;
  console.log('done!');
});
```

### [.eachStream](index.js#L529)

Generate `files` configurations in parallel.

**Params**

* `config` **{Object}**
* `returns` **{Stream}**: returns stream with all process files

**Example**

```js
generate.each(files)
  .on('error', console.error)
  .on('end', function() {
    console.log('done!');
  });
```

### [.scaffold](index.js#L566)

Generate files from a declarative [scaffold](https://github.com/jonschlinkert/scaffold) configuration.

**Params**

* `scaffold` **{Object}**: Scaffold configuration object.
* `cb` **{Function}**: Optional callback function. If not passed, `.scaffoldStream` will be called and a stream will be returned.

**Example**

```js
var Scaffold = require('scaffold');
var scaffold = new Scaffold({
  options: {cwd: 'source'},
  posts: {
    src: ['content/*.md']
  },
  pages: {
    src: ['templates/*.hbs']
  }
});

generate.scaffold(scaffold, function(err) {
  if (err) console.log(err);
});
```

### [.scaffoldStream](index.js#L608)

Generate files from a declarative [scaffold](https://github.com/jonschlinkert/scaffold) configuration.

**Params**

* `scaffold` **{Object}**: [scaffold](https://github.com/jonschlinkert/scaffold) configuration object.
* `returns` **{Stream}**: returns a stream with all processed files.

**Example**

```js
var Scaffold = require('scaffold');
var scaffold = new Scaffold({
  options: {cwd: 'source'},
  posts: {
    src: ['content/*.md']
  },
  pages: {
    src: ['templates/*.hbs']
  }
});

generate.scaffoldStream(scaffold)
  .on('error', console.error)
  .on('end', function() {
    console.log('done!');
  });
```

### [.union](index.js#L643)

Create or append array `name` on `generate.cache` with the given (uniqueified) `items`. Supports setting deeply nested properties using using object-paths/dot notation.

**Params**

* `name` **{String}**
* `items` **{any}**
* `returns` **{Object}**: returns the instance for chaining

**Example**

```js
generate.union('foo', 'bar');
generate.union('foo', 'baz');
generate.union('foo', 'qux');
generate.union('foo', 'qux');
console.log(generate.cache.foo);
//=> ['bar', 'baz', 'qux'];
```

**Example**

```js
var name = generate.name;
```

**Example**

```js
var base = generate.base;
```

## Task API

### [.task](https:/github.com/jonschlinkert/composer/blob/master/index.js#L68)

Register a new task with it's options and dependencies. To return the task object of an already registered task, pass the name of the task without any additional parameters.

**Params**

* `name` **{String}**: Name of the task to register
* `options` **{Object}**: Options to set dependencies or control flow.
* `options.deps` **{Object}**: array of dependencies
* `options.flow` **{Object}**: How this task will be executed with it's dependencies (`series`, `parallel`, `settleSeries`, `settleParallel`)
* `deps` **{String|Array|Function}**: Additional dependencies for this task.
* `fn` **{Function}**: Final function is the task to register.
* `returns` **{Object}**: Return the instance for chaining

**Example**

```js
// register task "site" with composer
app.task('site', ['styles'], function() {
  return app.src('templates/pages/*.hbs')
    .pipe(app.dest('_gh_pages'));
});

// get the "site" task object
var task = app.task('site');
```

### [.build](https:/github.com/jonschlinkert/composer/blob/master/index.js#L125)

Build a task or array of tasks.

**Params**

* `tasks` **{String|Array|Function}**: List of tasks by name, function, or array of names/functions.
* `cb` **{Function}**: Callback function to be called when all tasks are finished building.

**Example**

```js
app.build('default', function(err, results) {
  if (err) return console.error(err);
  console.log(results);
});
```

### [.series](https:/github.com/jonschlinkert/composer/blob/master/index.js#L181)

Compose task or list of tasks into a single function that runs the tasks in series.

**Params**

* `tasks` **{String|Array|Function}**: List of tasks by name, function, or array of names/functions.
* `returns` **{Function}**: Composed function that may take a callback function.

**Example**

```js
app.task('foo', function(done) {
  console.log('this is foo');
  done();
});

var fn = app.series('foo', function bar(done) {
  console.log('this is bar');
  done();
});

fn(function(err) {
  if (err) return console.error(err);
  console.log('done');
});
//=> this is foo
//=> this is bar
//=> done
```

### [.parallel](https:/github.com/jonschlinkert/composer/blob/master/index.js#L213)

Compose task or list of tasks into a single function that runs the tasks in parallel.

**Params**

* `tasks` **{String|Array|Function}**: List of tasks by name, function, or array of names/functions.
* `returns` **{Function}**: Composed function that may take a callback function.

**Example**

```js
app.task('foo', function(done) {
  setTimeout(function() {
    console.log('this is foo');
    done();
  }, 500);
});

var fn = app.parallel('foo', function bar(done) {
  console.log('this is bar');
  done();
});

fn(function(err) {
  if (err) return console.error(err);
  console.log('done');
});
//=> this is bar
//=> this is foo
//=> done
```

### [.watch](https:/github.com/jonschlinkert/composer/blob/master/index.js#L230)

Watch a file, directory, or glob pattern for changes and build a task or list of tasks when changes are made. Watch is powered by [chokidar][] so arguments can be anything supported by [chokidar.watch](https://github.com/paulmillr/chokidar#api).

**Params**

* `glob` **{String|Array}**: Filename, Directory name, or glob pattern to watch
* `options` **{Object}**: Additional options to be passed to [chokidar][]
* `tasks` **{String|Array|Function}**: Tasks that are passed to `.build` when files in the glob are changed.
* `returns` **{Object}**: Returns an instance of `FSWatcher` from [chokidar][]

**Example**

```js
var watcher = app.watch('templates/pages/*.hbs', ['site']);
```

## File System API

### [.copy](https:/github.com/jonschlinkert/assemble-fs/blob/master/index.js#L56)

Copy files with the given glob `patterns` to the specified `dest`.

**Params**

* `patterns` **{String|Array}**: Glob patterns of files to copy.
* `dest` **{String|Function}**: Desination directory.
* `returns` **{Stream}**: Stream, to continue processing if necessary.

**Example**

```js
app.task('assets', function(cb) {
  app.copy('assets/**', 'dist/')
    .on('error', cb)
    .on('finish', cb)
});
```

### [.src](https:/github.com/jonschlinkert/assemble-fs/blob/master/index.js#L73)

Glob patterns or filepaths to source files.

**Params**

* `glob` **{String|Array}**: Glob patterns or file paths to source files.
* `options` **{Object}**: Options or locals to merge into the context and/or pass to `src` plugins

**Example**

```js
app.src('src/*.hbs', {layout: 'default'});
```

### [.symlink](https:/github.com/jonschlinkert/assemble-fs/blob/master/index.js#L91)

Glob patterns or paths for symlinks.

**Params**

* `glob` **{String|Array}**

**Example**

```js
app.symlink('src/**');
```

### [.dest](https:/github.com/jonschlinkert/assemble-fs/blob/master/index.js#L107)

Specify a destination for processed files.

**Params**

* `dest` **{String|Function}**: File path or rename function.
* `options` **{Object}**: Options and locals to pass to `dest` plugins

**Example**

```js
app.dest('dist/');
```

## Authoring generators

_(TODO)_

### Generator naming conventions

**Do**

Use `generate-` as the prefix, followed by any words of your choosing to describe the purpose of the generator.

**Don't**

Use `generator-` as the prefix, since the word `generator` is already associated with yeoman.

## TODO

* [x] publish a fast, composable, highly extendable project generator with a user-friendly and expressive API
* [x] support sub-generators (to any level of nesting)
* [x] support streams, tasks, and plugins compatible with both [gulp](http://gulpjs.com) and [assemble](https://github.com/assemble/assemble-core)
* [x] make it super easy to run specific tasks from any generator or sub-generator, programmatically or via CLI
* [x] support _instance plugins_ that allow you to easily add functionality and features to generate
* [x] support any template engine
* [x] support using any number of template engines at once, so that different file types can simultaneously be handled by the engine that was registered for that file type
* [x] support templates as [vinyl](http://github.com/gulpjs/vinyl) files, simple to use template collections and lists (for pagination, sorting, groups etc)
* [x] support middleware that can be run on all files or specific files, and at specific points during the _build process_ (like `onLoad`, `preRender`, `postRender`, etc)
* [x] 1,000+ unit tests
* [ ] create and publish generators (we created a handful of generators that we've been using locally, these will be published shortly)
* [ ] CLI docs (started)
* [ ] User help (e.g. when the user does `gen help` or just `gen`)
* [ ] API docs
* [ ] Generator guidelines and conventions

## Why Generate?

* Generate is an MIT licensed, open source project
* Generate was designed to be a faster, smarter, more extensible alternative to the current dominent solutions.
* Generate has an expressive, imperitive API. If you like gulp or express, you might like generate too.
* Generate is modular, and built on top of great libraries like [bach](https://github.com/phated/bach), [composer](https://github.com/jonschlinkert/composer) and [assemble-core](https://github.com/assemble/assemble-core)

## Related projects

* [assemble-core](https://www.npmjs.com/package/assemble-core): The core assemble application with no presets or defaults. All configuration is left to the… [more](https://www.npmjs.com/package/assemble-core) | [homepage](https://github.com/assemble/assemble-core)
* [base-methods](https://www.npmjs.com/package/base-methods): base-methods is the foundation for creating modular, unit testable and highly pluggable node.js applications, starting… [more](https://www.npmjs.com/package/base-methods) | [homepage](https://github.com/jonschlinkert/base-methods)
* [base-resolver](https://www.npmjs.com/package/base-resolver): 'base-methods' plugin for resolving and loading globally installed npm modules. | [homepage](https://github.com/jonschlinkert/base-resolver)
* [base-runner](https://www.npmjs.com/package/base-runner): Orchestrate multiple instances of base-methods at once. | [homepage](https://github.com/jonschlinkert/base-runner)
* [resolve-modules](https://www.npmjs.com/package/resolve-modules): Resolves local and global npm modules that match specified patterns, and returns a configuration object… [more](https://www.npmjs.com/package/resolve-modules) | [homepage](https://github.com/jonschlinkert/resolve-modules)

## Running tests

Install dev dependencies:

```sh
$ npm i -d && npm test
```

## Contributing

Pull requests and stars are always welcome. For bugs and feature requests, [please create an issue](https://github.com/jonschlinkert/generate/issues/new).

## Author

**Jon Schlinkert**

* [github/jonschlinkert](https://github.com/jonschlinkert)
* [twitter/jonschlinkert](http://twitter.com/jonschlinkert)

## License

Copyright © 2016 [Jon Schlinkert](https://github.com/jonschlinkert)

Released under the MIT license.

***

_This file was generated by [verb](https://github.com/verbose/verb) on January 11, 2016._
